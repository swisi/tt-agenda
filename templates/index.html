{% extends "base.html" %}

{% block content %}
<div class="d-flex justify-content-between align-items-center mb-4">
    <h1 class="mb-0">Trainings Übersicht</h1>
    {% if session.get('user_role') == 'admin' %}
    <a href="{{ url_for('new_training') }}" class="btn btn-primary">
        <i class="bi bi-plus-circle me-1"></i>Neues Training
    </a>
    {% endif %}
</div>

<div class="row">
    {% for training in trainings %}
    <div class="col-md-6 col-lg-4 mb-3">
        <div class="card h-100">
            <div class="card-header">
                <h5 class="mb-0">{{ training.name }}</h5>
            </div>
            <div class="card-body">
                <div class="mb-2">
                    <i class="bi bi-calendar-week text-primary me-2"></i>
                    <strong>{{ weekdays[training.weekday] }}</strong>
                </div>
                <div class="mb-2">
                    <i class="bi bi-calendar-range text-primary me-2"></i>
                    {{ training.start_date.strftime('%d.%m.%Y') }} - {{ training.end_date.strftime('%d.%m.%Y') }}
                </div>
                <div class="mb-2">
                    <i class="bi bi-clock text-primary me-2"></i>
                    {{ training.start_time.strftime('%H:%M') }}
                </div>
                <div class="mb-3">
                    <i class="bi bi-list-task text-primary me-2"></i>
                    {{ training.activities|length }} Aktivitäten
                </div>
                <div class="d-flex gap-2 flex-wrap">
                    <a href="{{ url_for('training_schedule', id=training.id) }}" class="btn btn-sm btn-success">
                        <i class="bi bi-calendar3 me-1"></i>Zeitplan
                    </a>
                    {% if session.get('user_role') == 'admin' %}
                    <a href="{{ url_for('edit_training', id=training.id) }}" class="btn btn-sm btn-primary">
                        <i class="bi bi-pencil me-1"></i>Bearbeiten
                    </a>
                    <form method="POST" action="{{ url_for('delete_training', id=training.id) }}" style="display:inline;">
                        <button type="submit" class="btn btn-sm btn-danger" onclick="return confirm('Wirklich löschen?')">
                            <i class="bi bi-trash me-1"></i>Löschen
                        </button>
                    </form>
                    {% endif %}
                </div>
            </div>
        </div>
    </div>
    {% endfor %}
</div>

{% if trainings|length == 0 %}
<div class="text-center py-5">
    <i class="bi bi-inbox" style="font-size: 4rem; color: #cbd5e1;"></i>
    <h3 class="mt-3 text-muted">Keine Trainings vorhanden</h3>
    {% if session.get('user_role') == 'admin' %}
    <p class="text-muted">Erstellen Sie Ihr erstes Training</p>
    <a href="{{ url_for('new_training') }}" class="btn btn-primary">
        <i class="bi bi-plus-circle me-1"></i>Neues Training
    </a>
    {% endif %}
</div>
{% endif %}
{% endblock %}
